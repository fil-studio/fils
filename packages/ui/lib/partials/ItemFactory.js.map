{
  "version": 3,
  "sources": ["../../src/partials/ItemFactory.ts"],
  "sourcesContent": ["import { Item } from \"../components/items/Item\";\nimport { ItemParameters } from \"../components/items/ItemParameters\";\nimport check from \"../utils/check\";\n\n// Available items array\nexport interface AvailableItem {\n\tview: string,\n\tcreate: (params: CreateItemParams) => Item,\n}\nexport const AvailableItems = {\n\titems: [] as Array<AvailableItem>,\n}\nexport interface ItemRegisterOptions {\n\tview: string,\n\titem: typeof Item,\n}\n\nexport interface CreateItemParams {\n\tobject: any,\n\tkey: string,\n\tparams?: ItemParameters\n}\n\nconst compareArrays = (a: any[], b: any[]) => {\n\tif(a.length !== b.length) return false;\n\n\n\tfor (const item of a) {\n\t\tif (b.indexOf(item) === -1) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport const ItemRegister = (registerOptions:ItemRegisterOptions) => {\n\n\tconst createItem = (createParams: CreateItemParams) => {\n\t\treturn new registerOptions.item(createParams) as Item;\n\t}\n\n\tAvailableItems.items.push({\n\t\tview: registerOptions.view,\n\t\tcreate: createItem,\n\t});\n}\n\nexport const ItemFactory = (createParams:CreateItemParams) => {\n\n\tconst params = createParams.params;\n\n\tif(!createParams.object) throw new Error('ItemFactory - object is required');\n\tif(!createParams.key) throw new Error('ItemFactory - key is required');\n\n\t// Force item type\n\tif(params && params.view){\n\t\tconst item = AvailableItems.items.find(item => item.view === params.view);\n\t\tif(!item) throw new Error('ItemFactory - unknown view');\n\t\treturn item.create(createParams);\n\t}\n\n\tconst item = getItemByValue(createParams.object[createParams.key], createParams.params);\n\tif(item) {\n\t\tcreateParams.params!.view = item.view;\n\t\treturn item.create(createParams);\n\t}\n\n}\n\nconst getItemByValue = (value:any, params:any): AvailableItem | undefined => {\n\n\tif(check.isObject(value)) {\n\n\t\tlet keys = Object.keys(value);\n\t\tkeys = keys.map(key => key.toLowerCase());\n\n\t\tconst c1 = ['r', 'g', 'b'];\n\t\tconst c2 = ['h', 's', 'b'];\n\t\tconst c3 = ['h', 's', 'l'];\n\t\tif (compareArrays(keys, c1) || compareArrays(keys, c2) || compareArrays(keys, c3)) return AvailableItems.items.find(item => item.view === 'color');\n\n\t\tconst n1 = ['x', 'y'];\n\t\tconst n2 = ['x', 'y', 'z'];\n\t\tconst n3 = ['x', 'y', 'z', 'w'];\n\t\tif (compareArrays(keys, n1) || compareArrays(keys, n2) || compareArrays(keys, n3)) return AvailableItems.items.find(item => item.view === 'number');\n\t}\n\n\t// If min max or step use range\n\tif (check.isNumber(value)) {\n\t\tif(params){\n\t\t\tif(params.min || params.max || params.step) return AvailableItems.items.find(item => item.view === 'range');\n\t\t}\n\t\treturn AvailableItems.items.find(item => item.view === 'number');\n\t}\n\n\tif (check.isString(value)) {\n\t\tif(value.substring(0,1) === '#') return AvailableItems.items.find(item => item.view === 'color');\n\t\tif(value.substring(0,2) === '0x') return AvailableItems.items.find(item => item.view === 'color');\n\t\treturn AvailableItems.items.find(item => item.view === 'string');\n\t}\n\n\tif(check.isBoolean(value)) return AvailableItems.items.find(item => item.view === 'boolean');\n\n\treturn undefined;\n\n}"],
  "mappings": "AAEA,OAAO,WAAW;AAOX,aAAM,iBAAiB;AAAA,EAC7B,OAAO,CAAC;AACT;AAYA,MAAM,gBAAgB,CAAC,GAAU,MAAa;AAC7C,MAAG,EAAE,WAAW,EAAE;AAAQ,WAAO;AAGjC,aAAW,QAAQ,GAAG;AACrB,QAAI,EAAE,QAAQ,IAAI,MAAM,IAAI;AAC3B,aAAO;AAAA,IACR;AAAA,EACD;AAEA,SAAO;AACR;AAEO,aAAM,eAAe,CAAC,oBAAwC;AAEpE,QAAM,aAAa,CAAC,iBAAmC;AACtD,WAAO,IAAI,gBAAgB,KAAK,YAAY;AAAA,EAC7C;AAEA,iBAAe,MAAM,KAAK;AAAA,IACzB,MAAM,gBAAgB;AAAA,IACtB,QAAQ;AAAA,EACT,CAAC;AACF;AAEO,aAAM,cAAc,CAAC,iBAAkC;AAE7D,QAAM,SAAS,aAAa;AAE5B,MAAG,CAAC,aAAa;AAAQ,UAAM,IAAI,MAAM,kCAAkC;AAC3E,MAAG,CAAC,aAAa;AAAK,UAAM,IAAI,MAAM,+BAA+B;AAGrE,MAAG,UAAU,OAAO,MAAK;AACxB,UAAMA,QAAO,eAAe,MAAM,KAAK,CAAAA,UAAQA,MAAK,SAAS,OAAO,IAAI;AACxE,QAAG,CAACA;AAAM,YAAM,IAAI,MAAM,4BAA4B;AACtD,WAAOA,MAAK,OAAO,YAAY;AAAA,EAChC;AAEA,QAAM,OAAO,eAAe,aAAa,OAAO,aAAa,GAAG,GAAG,aAAa,MAAM;AACtF,MAAG,MAAM;AACR,iBAAa,OAAQ,OAAO,KAAK;AACjC,WAAO,KAAK,OAAO,YAAY;AAAA,EAChC;AAED;AAEA,MAAM,iBAAiB,CAAC,OAAW,WAA0C;AAE5E,MAAG,MAAM,SAAS,KAAK,GAAG;AAEzB,QAAI,OAAO,OAAO,KAAK,KAAK;AAC5B,WAAO,KAAK,IAAI,SAAO,IAAI,YAAY,CAAC;AAExC,UAAM,KAAK,CAAC,KAAK,KAAK,GAAG;AACzB,UAAM,KAAK,CAAC,KAAK,KAAK,GAAG;AACzB,UAAM,KAAK,CAAC,KAAK,KAAK,GAAG;AACzB,QAAI,cAAc,MAAM,EAAE,KAAK,cAAc,MAAM,EAAE,KAAK,cAAc,MAAM,EAAE;AAAG,aAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,OAAO;AAEjJ,UAAM,KAAK,CAAC,KAAK,GAAG;AACpB,UAAM,KAAK,CAAC,KAAK,KAAK,GAAG;AACzB,UAAM,KAAK,CAAC,KAAK,KAAK,KAAK,GAAG;AAC9B,QAAI,cAAc,MAAM,EAAE,KAAK,cAAc,MAAM,EAAE,KAAK,cAAc,MAAM,EAAE;AAAG,aAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,QAAQ;AAAA,EACnJ;AAGA,MAAI,MAAM,SAAS,KAAK,GAAG;AAC1B,QAAG,QAAO;AACT,UAAG,OAAO,OAAO,OAAO,OAAO,OAAO;AAAM,eAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,OAAO;AAAA,IAC3G;AACA,WAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,QAAQ;AAAA,EAChE;AAEA,MAAI,MAAM,SAAS,KAAK,GAAG;AAC1B,QAAG,MAAM,UAAU,GAAE,CAAC,MAAM;AAAK,aAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,OAAO;AAC/F,QAAG,MAAM,UAAU,GAAE,CAAC,MAAM;AAAM,aAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,OAAO;AAChG,WAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,QAAQ;AAAA,EAChE;AAEA,MAAG,MAAM,UAAU,KAAK;AAAG,WAAO,eAAe,MAAM,KAAK,UAAQ,KAAK,SAAS,SAAS;AAE3F,SAAO;AAER;",
  "names": ["item"]
}
