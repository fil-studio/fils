import s from"../utils/check";export const AvailableItems={items:[]};const i=(t,r)=>{if(t.length!==r.length)return!1;for(const e of t)if(r.indexOf(e)===-1)return!1;return!0};export const ItemRegister=t=>{const r=e=>new t.item(e);AvailableItems.items.push({view:t.view,create:r})},ItemFactory=t=>{const r=t.params;if(!t.object)throw new Error("ItemFactory - object is required");if(!t.key)throw new Error("ItemFactory - key is required");if(r&&r.view){const o=AvailableItems.items.find(m=>m.view===r.view);if(!o)throw new Error("ItemFactory - unknown view");return o.create(t)}const e=I(t.object[t.key],t.params);if(e)return t.params.view=e.view,e.create(t)};const I=(t,r)=>{if(s.isObject(t)){let e=Object.keys(t);e=e.map(n=>n.toLowerCase());const o=["r","g","b"],m=["h","s","b"],f=["h","s","l"];if(i(e,o)||i(e,m)||i(e,f))return AvailableItems.items.find(n=>n.view==="color");const c=["x","y"],a=["x","y","z"],w=["x","y","z","w"];if(i(e,c)||i(e,a)||i(e,w))return AvailableItems.items.find(n=>n.view==="number")}if(s.isNumber(t))return r&&(r.min||r.max||r.step)?AvailableItems.items.find(e=>e.view==="range"):AvailableItems.items.find(e=>e.view==="number");if(s.isString(t))return t.substring(0,1)==="#"?AvailableItems.items.find(e=>e.view==="color"):t.substring(0,2)==="0x"?AvailableItems.items.find(e=>e.view==="color"):AvailableItems.items.find(e=>e.view==="string");if(s.isBoolean(t))return AvailableItems.items.find(e=>e.view==="boolean")};
//# sourceMappingURL=ItemFactory.js.map
