import{el as e}from"@fils/utils";import{uiDownarrowHlt as h}from"@fils/ui-icons";import{CSS_UI as s}from"../../../partials/cssClasses";import r from"../../../utils/check";import{Panel as u}from"../../Panel";import{Item as m}from"../Item";const n={type:"select",input:"_ui-select-input",label:"_ui-select-label",open:"_ui-select-open",panel:"_ui-panel-select",option:"_ui-panel-select-option",search:"_ui-panel-select-search",optionNone:"_ui-panel-select-option-none",searchInput:"_ui-panel-select-search-input"};export class SelectPanel extends u{constructor(){super(...arguments);this.parent=null;this.search=e("div");this.searchInput=e("input");this.optionNone=e("div");this.options=[]}addEventListeners(){super.addEventListeners(),window.addEventListener("click",t=>{if(!this.created)return;const i=t.target;this.el.contains(i)||this.parent.el.contains(i)||(this.destroy(),this.parent.close())})}createPanelContent(){this.createSearch();const t=this.parent.params.options;this.options=Object.keys(t).map(o=>{const a=e("div",n.option),p=e("p");p.innerHTML=o,a.appendChild(p),this.el.appendChild(a);const l=t[o];return this.parent.value===l&&a.classList.add(s.utility.hidden),a.addEventListener("click",()=>{this.parent.setValue(l),this.destroy(),this.parent.close()}),{key:o,value:l,dom:a}}),this.optionNone=e("div",n.optionNone);const i=e("p");i.innerHTML="No options found",this.optionNone.appendChild(i),this.el.appendChild(this.optionNone),this.optionNone.classList.add(s.utility.hidden),setTimeout(()=>this.searchInput.focus(),10)}searchOptions(){const t=this.searchInput.value.toLowerCase();this.optionNone.classList.remove(s.utility.hidden),this.options.map(i=>{i.key.toLowerCase().indexOf(t)>=0||String(i.value).toLowerCase().indexOf(t)>=0||t===""?(i.dom.classList.remove(s.utility.hidden),this.optionNone.classList.add(s.utility.hidden)):i.dom.classList.add(s.utility.hidden)})}createSearch(){this.search=e("div",n.search,this.el),this.searchInput=e("input",n.searchInput),this.searchInput.placeholder="Search",this.searchInput.type="text",this.search.appendChild(this.searchInput),this.el.appendChild(this.search),this.searchInput.addEventListener("input",()=>{this.searchOptions()})}}export class SelectItem extends m{constructor(){super(...arguments);this.options={};this.input=e("div");this.label=e("div");this.activeOption=e("div")}afterCreate(){this.panel=new SelectPanel(this)}addEventListeners(){super.addEventListeners(),this.input.addEventListener("click",()=>{this.panel.created?(this.panel.destroy(),this.close()):(this.panel.create(),this.open())})}open(){this.el.classList.add(n.open)}close(){this.el.classList.remove(n.open)}createContent(){this.input=e("div",n.input,this.content),this.input.innerHTML=h,this.label=e("p",n.label,this.input)}setValue(t){this.label.innerHTML=r.isNull(t)||r.isUndefined(t)?"Select...":t,super.setValue(t)}}
//# sourceMappingURL=SelectItem.js.map
