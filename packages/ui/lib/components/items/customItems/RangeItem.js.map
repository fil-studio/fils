{
  "version": 3,
  "sources": ["../../../../src/components/items/customItems/RangeItem.ts"],
  "sourcesContent": ["import { MathUtils } from \"@fils/math\";\nimport { el } from \"@fils/utils\";\nimport { CSS_UI } from \"../../../partials/cssClasses\";\nimport check from \"../../../utils/check\";\nimport { Item } from \"../Item\";\nimport { RangeItemParameters } from \"../ItemParameters\";\n\nconst c = {\n\ttype: 'range',\n\tinput: '_ui-range-input',\n\ttrack: '_ui-range-track',\n\toverExpose: '_ui-range-overexpose',\n\toverExposeMin: '_ui-range-overexpose-min',\n\toverExposeMax: '_ui-range-overexpose-max',\n\tthumb: '_ui-range-thumb',\n};\n\n\n\nexport class RangeItem extends Item {\n\tinput!: HTMLInputElement;\n\trange!: HTMLElement;\n\tthumb!: HTMLElement;\n\n\tparams!: RangeItemParameters;\n\n\tmax: number = 0;\n\tmin: number = 1;\n\tstep: number = 0.01;\n\tdecimals: number = 2;\n\n\tlimitNumber = (value: number):number => {\n\n\t\tlet tmp = value;\n\t\tif(this.max) tmp = Math.min(tmp, this.max);\n\t\tif(this.min) tmp = Math.max(tmp, this.min);\n\n\t\t// Round to decimals\n\t\ttmp = Math.round(tmp * Math.pow(10, this.decimals)) / Math.pow(10, this.decimals);\n\n\t\treturn tmp;\n\t}\n\n\tprotected addEventListeners(): void {\n\n\t\tthis.input.value = `${Math.max(Math.min(this.max, this.value), this.min)}`;\n\n\t\tthis.updateRange();\n\n\t\tthis.input.addEventListener('change', () => {\n\t\t\tlet value = this.input.valueAsNumber;\n\t\t\tvalue = this.limitNumber(value);\n\t\t\tthis.input.valueAsNumber = value;\n\t\t\tthis.setValue(value);\n\t\t\tthis.updateRange();\n\t\t});\n\n\t\tlet dragging = false;\n\t\tlet x = 0;\n\t\tlet originalValue = 0;\n\n\t\tconst mouseDown = (e: MouseEvent) => {\n\t\t\tconst t = e.target as HTMLElement;\n\t\t\tif (t != this.thumb) return;\n\t\t\tdragging = true;\n\t\t\tthis.thumb.classList.add(CSS_UI.utility.grab);\n\t\t\tx = e.clientX;\n\t\t\tconst { width } = this.range.getBoundingClientRect();\n\t\t\toriginalValue = MathUtils.map(this.mappedValue, 0, 1, 0, width);\n\t\t}\n\n\t\tconst mouseMove = (e: MouseEvent) => {\n\t\t\tif (!dragging) return;\n\n\t\t\tconst movementDistance = originalValue + (e.clientX - x);\n\t\t\tconst { width } = this.range.getBoundingClientRect();\n\n\t\t\tconst newValueMapped = MathUtils.clamp(MathUtils.map(movementDistance, 0, width, 0, 1), 0, 1);\n\t\t\tconst newValue = MathUtils.map(newValueMapped, 0, 1, this.min, this.max);\n\n\t\t\tthis.value = Math.round(newValue / this.step) * this.step;\n\n\t\t\tthis.updateInput();\n\t\t\tthis.updateRange();\n\t\t}\n\n\t\tconst mouseClick = (e:MouseEvent) => {\n\t\t\tconst t = e.target as HTMLElement;\n\t\t\tif (t === this.thumb) return;\n\n\t\t\tconst { left, width } = this.range.getBoundingClientRect();\n\t\t\tconst newPosition = e.clientX - left;\n\n\t\t\tconst newValueMapped = MathUtils.clamp(MathUtils.map(newPosition, 0, width, 0, 1), 0, 1);\n\t\t\tconst newValue = MathUtils.map(newValueMapped, 0, 1, this.min, this.max);\n\t\t\tthis.value = Math.round(newValue / this.step) * this.step;\n\n\t\t\tthis.updateInput();\n\t\t\tthis.updateRange();\n\t\t}\n\n\t\tconst reset = () => {\n\t\t\tif (!dragging) return\n\t\t\tdragging = false;\n\t\t\tx = 0;\n\t\t\tthis.thumb.classList.remove(CSS_UI.utility.grab);\n\t\t}\n\n\t\tthis.range.addEventListener('click', (e:MouseEvent) => {\n\t\t\tmouseClick(e);\n\t\t})\n\n\t\tthis.range.addEventListener('mousedown', (e: MouseEvent) => {\n\t\t\tmouseDown(e);\n\t\t});\n\t\twindow.addEventListener('mousemove', (e: MouseEvent) => {\n\t\t\tmouseMove(e);\n\t\t})\n\t\twindow.addEventListener('mouseup', () => {\n\t\t\treset();\n\t\t});\n\n\t}\n\n\tprotected get mappedValue(): number {\n\t\treturn MathUtils.clamp(MathUtils.map(this.value, this.min, this.max, 0, 1), 0, 1);\n\t}\n\n\tprotected createContent(): void {\n\n\t\tthis.max = this.params.max ? this.params.max : this.max;\n\t\tthis.min = this.params.min ? this.params.min : this.min;\n\t\tthis.step = this.params.step ? this.params.step : 0.01;\n\t\tthis.decimals = this.params.decimals ? this.params.decimals : 2;\n\n\t\tthis.content.innerHTML = `\n\t\t\t<div class=\"${c.input}\">\n\t\t\t\t<div class=\"${c.track}\"></div>\n\t\t\t\t<div class=\"${c.overExpose} ${c.overExposeMin}\"></div>\n\t\t\t\t<div class=\"${c.overExpose} ${c.overExposeMax}\"></div>\n\t\t\t\t<div class=\"${c.thumb}\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.input = el('input') as HTMLInputElement;\n\t\tthis.input.type = 'number';\n\t\tthis.input.placeholder = 'Value';\n\t\tif(this.min) this.input.setAttribute('min', this.min.toString());\n\t\tif(this.max) this.input.setAttribute('max', this.max.toString());\n\t\tif(this.step) this.input.setAttribute('step', this.step.toString());\n\t\tthis.content.appendChild(this.input);\n\n\t\tthis.range = this.content.querySelector(`.${c.input}`) as HTMLElement;\n\t\tthis.thumb = this.content.querySelector(`.${c.thumb}`) as HTMLElement;\n\n\t\tthis.setUpOverExpose();\n\n\t\tthis.input.min = `${this.min}`;\n\t\tthis.input.max = `${this.max}`;\n\n\t\tthis.step = this.params.step ? this.params.step : this.step;\n\t\tif(this.step === 0) this.step = 0.01;\n\n\t\tthis.input.step = `${this.step}`;\n\t}\n\n\tprotected setUpOverExpose(): void {\n\t\tconst overExpose = this.params.overExpose || [0, 0];\n\t\tlet limits = [0, 0] as [number, number];\n\n\t\tif (!check.isArray(overExpose)) limits = [overExpose as number, overExpose as number];\n\t\telse limits = overExpose as [number, number];\n\n\t\tthis.min = this.params.min ? this.params.min - limits[0] : limits[0];\n\t\tthis.max = this.params.max ? this.params.max + limits[1] : limits[1];\n\n\t\tconst overExposeEls = this.content.querySelectorAll(`.${c.overExpose}`) as NodeListOf<HTMLElement>;\n\n\t\tconst distance = Math.abs(this.min - this.max);\n\n\t\tconst left = MathUtils.map(limits[0], 0, distance, 0, 1);\n\t\tconst right = MathUtils.map(limits[1], 0, distance, 0, 1);\n\n\t\toverExposeEls[0].style.setProperty('--size', `${left}`);\n\t\toverExposeEls[1].style.setProperty('--size', `${right}`);\n\n\t}\n\n\tprotected updateRange(): void {\n\t\tthis.range.style.setProperty('--value', `${this.mappedValue}`);\n\t}\n\tprotected updateInput(): void {\n\t\tthis.input.value = `${this.value.toFixed(2)}`;\n\t}\n\n\trefreshDom(): void {\n\t\tthis.updateInput();\n\t\tthis.updateRange();\n\t\tsuper.refreshDom();\n\t}\n\n}\n"],
  "mappings": "AAAA,OAAS,aAAAA,MAAiB,aAC1B,OAAS,MAAAC,MAAU,cACnB,OAAS,UAAAC,MAAc,+BACvB,OAAOC,MAAW,uBAClB,OAAS,QAAAC,MAAY,UAGrB,MAAMC,EAAI,CACT,KAAM,QACN,MAAO,kBACP,MAAO,kBACP,WAAY,uBACZ,cAAe,2BACf,cAAe,2BACf,MAAO,iBACR,EAIO,aAAM,kBAAkBD,CAAK,CAA7B,kCAON,SAAc,EACd,SAAc,EACd,UAAe,IACf,cAAmB,EAEnB,iBAAeE,GAAyB,CAEvC,IAAIC,EAAMD,EACV,OAAG,KAAK,MAAKC,EAAM,KAAK,IAAIA,EAAK,KAAK,GAAG,GACtC,KAAK,MAAKA,EAAM,KAAK,IAAIA,EAAK,KAAK,GAAG,GAGzCA,EAAM,KAAK,MAAMA,EAAM,KAAK,IAAI,GAAI,KAAK,QAAQ,CAAC,EAAI,KAAK,IAAI,GAAI,KAAK,QAAQ,EAEzEA,CACR,EAEU,mBAA0B,CAEnC,KAAK,MAAM,MAAQ,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAK,KAAK,KAAK,EAAG,KAAK,GAAG,IAEvE,KAAK,YAAY,EAEjB,KAAK,MAAM,iBAAiB,SAAU,IAAM,CAC3C,IAAID,EAAQ,KAAK,MAAM,cACvBA,EAAQ,KAAK,YAAYA,CAAK,EAC9B,KAAK,MAAM,cAAgBA,EAC3B,KAAK,SAASA,CAAK,EACnB,KAAK,YAAY,CAClB,CAAC,EAED,IAAIE,EAAW,GACXC,EAAI,EACJC,EAAgB,EAEpB,MAAMC,EAAa,GAAkB,CAEpC,GADU,EAAE,QACH,KAAK,MAAO,OACrBH,EAAW,GACX,KAAK,MAAM,UAAU,IAAIN,EAAO,QAAQ,IAAI,EAC5CO,EAAI,EAAE,QACN,KAAM,CAAE,MAAAG,CAAM,EAAI,KAAK,MAAM,sBAAsB,EACnDF,EAAgBV,EAAU,IAAI,KAAK,YAAa,EAAG,EAAG,EAAGY,CAAK,CAC/D,EAEMC,EAAa,GAAkB,CACpC,GAAI,CAACL,EAAU,OAEf,MAAMM,EAAmBJ,GAAiB,EAAE,QAAUD,GAChD,CAAE,MAAAG,CAAM,EAAI,KAAK,MAAM,sBAAsB,EAE7CG,EAAiBf,EAAU,MAAMA,EAAU,IAAIc,EAAkB,EAAGF,EAAO,EAAG,CAAC,EAAG,EAAG,CAAC,EACtFI,EAAWhB,EAAU,IAAIe,EAAgB,EAAG,EAAG,KAAK,IAAK,KAAK,GAAG,EAEvE,KAAK,MAAQ,KAAK,MAAMC,EAAW,KAAK,IAAI,EAAI,KAAK,KAErD,KAAK,YAAY,EACjB,KAAK,YAAY,CAClB,EAEMC,EAAc,GAAiB,CAEpC,GADU,EAAE,SACF,KAAK,MAAO,OAEtB,KAAM,CAAE,KAAAC,EAAM,MAAAN,CAAM,EAAI,KAAK,MAAM,sBAAsB,EACnDO,EAAc,EAAE,QAAUD,EAE1BH,EAAiBf,EAAU,MAAMA,EAAU,IAAImB,EAAa,EAAGP,EAAO,EAAG,CAAC,EAAG,EAAG,CAAC,EACjFI,EAAWhB,EAAU,IAAIe,EAAgB,EAAG,EAAG,KAAK,IAAK,KAAK,GAAG,EACvE,KAAK,MAAQ,KAAK,MAAMC,EAAW,KAAK,IAAI,EAAI,KAAK,KAErD,KAAK,YAAY,EACjB,KAAK,YAAY,CAClB,EAEMI,EAAQ,IAAM,CACdZ,IACLA,EAAW,GACXC,EAAI,EACJ,KAAK,MAAM,UAAU,OAAOP,EAAO,QAAQ,IAAI,EAChD,EAEA,KAAK,MAAM,iBAAiB,QAAU,GAAiB,CACtDe,EAAW,CAAC,CACb,CAAC,EAED,KAAK,MAAM,iBAAiB,YAAc,GAAkB,CAC3DN,EAAU,CAAC,CACZ,CAAC,EACD,OAAO,iBAAiB,YAAc,GAAkB,CACvDE,EAAU,CAAC,CACZ,CAAC,EACD,OAAO,iBAAiB,UAAW,IAAM,CACxCO,EAAM,CACP,CAAC,CAEF,CAEA,IAAc,aAAsB,CACnC,OAAOpB,EAAU,MAAMA,EAAU,IAAI,KAAK,MAAO,KAAK,IAAK,KAAK,IAAK,EAAG,CAAC,EAAG,EAAG,CAAC,CACjF,CAEU,eAAsB,CAE/B,KAAK,IAAM,KAAK,OAAO,IAAM,KAAK,OAAO,IAAM,KAAK,IACpD,KAAK,IAAM,KAAK,OAAO,IAAM,KAAK,OAAO,IAAM,KAAK,IACpD,KAAK,KAAO,KAAK,OAAO,KAAO,KAAK,OAAO,KAAO,IAClD,KAAK,SAAW,KAAK,OAAO,SAAW,KAAK,OAAO,SAAW,EAE9D,KAAK,QAAQ,UAAY;AAAA,iBACVK,EAAE;AAAA,kBACDA,EAAE;AAAA,kBACFA,EAAE,cAAcA,EAAE;AAAA,kBAClBA,EAAE,cAAcA,EAAE;AAAA,kBAClBA,EAAE;AAAA;AAAA,IAIlB,KAAK,MAAQJ,EAAG,OAAO,EACvB,KAAK,MAAM,KAAO,SAClB,KAAK,MAAM,YAAc,QACtB,KAAK,KAAK,KAAK,MAAM,aAAa,MAAO,KAAK,IAAI,SAAS,CAAC,EAC5D,KAAK,KAAK,KAAK,MAAM,aAAa,MAAO,KAAK,IAAI,SAAS,CAAC,EAC5D,KAAK,MAAM,KAAK,MAAM,aAAa,OAAQ,KAAK,KAAK,SAAS,CAAC,EAClE,KAAK,QAAQ,YAAY,KAAK,KAAK,EAEnC,KAAK,MAAQ,KAAK,QAAQ,cAAc,IAAII,EAAE,OAAO,EACrD,KAAK,MAAQ,KAAK,QAAQ,cAAc,IAAIA,EAAE,OAAO,EAErD,KAAK,gBAAgB,EAErB,KAAK,MAAM,IAAM,GAAG,KAAK,MACzB,KAAK,MAAM,IAAM,GAAG,KAAK,MAEzB,KAAK,KAAO,KAAK,OAAO,KAAO,KAAK,OAAO,KAAO,KAAK,KACpD,KAAK,OAAS,IAAG,KAAK,KAAO,KAEhC,KAAK,MAAM,KAAO,GAAG,KAAK,MAC3B,CAEU,iBAAwB,CACjC,MAAMgB,EAAa,KAAK,OAAO,YAAc,CAAC,EAAG,CAAC,EAClD,IAAIC,EAAS,CAAC,EAAG,CAAC,EAEbnB,EAAM,QAAQkB,CAAU,EACxBC,EAASD,EADkBC,EAAS,CAACD,EAAsBA,CAAoB,EAGpF,KAAK,IAAM,KAAK,OAAO,IAAM,KAAK,OAAO,IAAMC,EAAO,CAAC,EAAIA,EAAO,CAAC,EACnE,KAAK,IAAM,KAAK,OAAO,IAAM,KAAK,OAAO,IAAMA,EAAO,CAAC,EAAIA,EAAO,CAAC,EAEnE,MAAMC,EAAgB,KAAK,QAAQ,iBAAiB,IAAIlB,EAAE,YAAY,EAEhEmB,EAAW,KAAK,IAAI,KAAK,IAAM,KAAK,GAAG,EAEvCN,EAAOlB,EAAU,IAAIsB,EAAO,CAAC,EAAG,EAAGE,EAAU,EAAG,CAAC,EACjDC,EAAQzB,EAAU,IAAIsB,EAAO,CAAC,EAAG,EAAGE,EAAU,EAAG,CAAC,EAExDD,EAAc,CAAC,EAAE,MAAM,YAAY,SAAU,GAAGL,GAAM,EACtDK,EAAc,CAAC,EAAE,MAAM,YAAY,SAAU,GAAGE,GAAO,CAExD,CAEU,aAAoB,CAC7B,KAAK,MAAM,MAAM,YAAY,UAAW,GAAG,KAAK,aAAa,CAC9D,CACU,aAAoB,CAC7B,KAAK,MAAM,MAAQ,GAAG,KAAK,MAAM,QAAQ,CAAC,GAC3C,CAEA,YAAmB,CAClB,KAAK,YAAY,EACjB,KAAK,YAAY,EACjB,MAAM,WAAW,CAClB,CAED",
  "names": ["MathUtils", "el", "CSS_UI", "check", "Item", "c", "value", "tmp", "dragging", "x", "originalValue", "mouseDown", "width", "mouseMove", "movementDistance", "newValueMapped", "newValue", "mouseClick", "left", "newPosition", "reset", "overExpose", "limits", "overExposeEls", "distance", "right"]
}
