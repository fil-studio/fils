{
  "version": 3,
  "sources": ["../../../../src/components/items/customItems/RangeItem.ts"],
  "sourcesContent": ["import { MathUtils } from \"@fils/math\";\nimport { el } from \"@fils/utils\";\nimport { CSS_UI } from \"../../../partials/cssClasses\";\nimport check from \"../../../utils/check\";\nimport { Item } from \"../Item\";\nimport { RangeItemParameters } from \"../ItemParameters\";\n\nconst c = {\n\ttype: 'range',\n\tinput: '_ui-range-input',\n\ttrack: '_ui-range-track',\n\toverExpose: '_ui-range-overexpose',\n\toverExposeMin: '_ui-range-overexpose-min',\n\toverExposeMax: '_ui-range-overexpose-max',\n\tthumb: '_ui-range-thumb',\n};\n\n\n\nexport class RangeItem extends Item {\n\tinput!: HTMLInputElement;\n\trange!: HTMLElement;\n\tthumb!: HTMLElement;\n\n\tparams!: RangeItemParameters;\n\n\tmax: number = 0;\n\tmin: number = 1;\n\tstep: number = 0.01;\n\tdecimals: number = 2;\n\n\tlimitNumber = (value: number):number => {\n\n\t\tlet tmp = value;\n\t\tif(this.max) tmp = Math.min(tmp, this.max);\n\t\tif(this.min) tmp = Math.max(tmp, this.min);\n\n\t\t// Round to decimals\n\t\ttmp = Math.round(tmp * Math.pow(10, this.decimals)) / Math.pow(10, this.decimals);\n\n\t\treturn tmp;\n\t}\n\n\tprotected addEventListeners(): void {\n\n\t\tthis.input.value = `${Math.max(Math.min(this.max, this.value), this.min)}`;\n\n\t\tthis.updateRange();\n\n\t\tthis.input.addEventListener('change', () => {\n\t\t\tlet value = this.input.valueAsNumber;\n\t\t\tvalue = this.limitNumber(value);\n\t\t\tthis.input.valueAsNumber = value;\n\t\t\tthis.setValue(value);\n\t\t\tthis.updateRange();\n\t\t});\n\n\t\tlet dragging = false;\n\t\tlet x = 0;\n\t\tlet originalValue = 0;\n\n\t\tconst mouseDown = (e: MouseEvent) => {\n\t\t\tconst t = e.target as HTMLElement;\n\t\t\tif (t != this.thumb) return;\n\t\t\tdragging = true;\n\t\t\tthis.thumb.classList.add(CSS_UI.utility.grab);\n\t\t\tx = e.clientX;\n\t\t\tconst { width } = this.range.getBoundingClientRect();\n\t\t\toriginalValue = MathUtils.map(this.mappedValue, 0, 1, 0, width);\n\t\t}\n\n\t\tconst mouseMove = (e: MouseEvent) => {\n\t\t\tif (!dragging) return;\n\n\t\t\tconst movementDistance = originalValue + (e.clientX - x);\n\t\t\tconst { width } = this.range.getBoundingClientRect();\n\n\t\t\tconst newValueMapped = MathUtils.clamp(MathUtils.map(movementDistance, 0, width, 0, 1), 0, 1);\n\t\t\tconst newValue = MathUtils.map(newValueMapped, 0, 1, this.min, this.max);\n\n\t\t\tthis.value = Math.round(newValue / this.step) * this.step;\n\n\t\t\tthis.updateInput();\n\t\t\tthis.updateRange();\n\t\t}\n\n\t\tconst mouseClick = (e:MouseEvent) => {\n\t\t\tconst t = e.target as HTMLElement;\n\t\t\tif (t === this.thumb) return;\n\n\t\t\tconst { left, width } = this.range.getBoundingClientRect();\n\t\t\tconst newPosition = e.clientX - left;\n\n\t\t\tconst newValueMapped = MathUtils.clamp(MathUtils.map(newPosition, 0, width, 0, 1), 0, 1);\n\t\t\tconst newValue = MathUtils.map(newValueMapped, 0, 1, this.min, this.max);\n\t\t\tthis.value = Math.round(newValue / this.step) * this.step;\n\n\t\t\tthis.updateInput();\n\t\t\tthis.updateRange();\n\t\t}\n\n\t\tconst reset = () => {\n\t\t\tif (!dragging) return\n\t\t\tdragging = false;\n\t\t\tx = 0;\n\t\t\tthis.thumb.classList.remove(CSS_UI.utility.grab);\n\t\t}\n\n\t\tthis.range.addEventListener('click', (e:MouseEvent) => {\n\t\t\tmouseClick(e);\n\t\t})\n\n\t\tthis.range.addEventListener('mousedown', (e: MouseEvent) => {\n\t\t\tmouseDown(e);\n\t\t});\n\t\twindow.addEventListener('mousemove', (e: MouseEvent) => {\n\t\t\tmouseMove(e);\n\t\t})\n\t\twindow.addEventListener('mouseup', () => {\n\t\t\treset();\n\t\t});\n\n\t}\n\n\tprotected get mappedValue(): number {\n\t\treturn MathUtils.clamp(MathUtils.map(this.value, this.min, this.max, 0, 1), 0, 1);\n\t}\n\n\tprotected createContent(): void {\n\n\t\tthis.max = this.params.max ? this.params.max : this.max;\n\t\tthis.min = this.params.min ? this.params.min : this.min;\n\t\tthis.step = this.params.step ? this.params.step : 0.01;\n\t\tthis.decimals = this.params.decimals ? this.params.decimals : 2;\n\n\t\tthis.content.innerHTML = `\n\t\t\t<div class=\"${c.input}\">\n\t\t\t\t<div class=\"${c.track}\"></div>\n\t\t\t\t<div class=\"${c.overExpose} ${c.overExposeMin}\"></div>\n\t\t\t\t<div class=\"${c.overExpose} ${c.overExposeMax}\"></div>\n\t\t\t\t<div class=\"${c.thumb}\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.input = el('input') as HTMLInputElement;\n\t\tthis.input.type = 'number';\n\t\tthis.input.placeholder = 'Value';\n\t\tif(this.min) this.input.setAttribute('min', this.min.toString());\n\t\tif(this.max) this.input.setAttribute('max', this.max.toString());\n\t\tif(this.step) this.input.setAttribute('step', this.step.toString());\n\t\tthis.content.appendChild(this.input);\n\n\t\tthis.range = this.content.querySelector(`.${c.input}`) as HTMLElement;\n\t\tthis.thumb = this.content.querySelector(`.${c.thumb}`) as HTMLElement;\n\n\t\tthis.setUpOverExpose();\n\n\t\tthis.input.min = `${this.min}`;\n\t\tthis.input.max = `${this.max}`;\n\n\t\tthis.step = this.params.step ? this.params.step : this.step;\n\t\tif(this.step === 0) this.step = 0.01;\n\n\t\tthis.input.step = `${this.step}`;\n\t}\n\n\tprotected setUpOverExpose(): void {\n\t\tconst overExpose = this.params.overExpose || [0, 0];\n\t\tlet limits = [0, 0] as [number, number];\n\n\t\tif (!check.isArray(overExpose)) limits = [overExpose as number, overExpose as number];\n\t\telse limits = overExpose as [number, number];\n\n\t\tthis.min = this.params.min ? this.params.min - limits[0] : limits[0];\n\t\tthis.max = this.params.max ? this.params.max + limits[1] : limits[1];\n\n\t\tconst overExposeEls = this.content.querySelectorAll(`.${c.overExpose}`) as NodeListOf<HTMLElement>;\n\n\t\tconst distance = Math.abs(this.min - this.max);\n\n\t\tconst left = MathUtils.map(limits[0], 0, distance, 0, 1);\n\t\tconst right = MathUtils.map(limits[1], 0, distance, 0, 1);\n\n\t\toverExposeEls[0].style.setProperty('--size', `${left}`);\n\t\toverExposeEls[1].style.setProperty('--size', `${right}`);\n\n\t}\n\n\tprotected updateRange(): void {\n\t\tthis.range.style.setProperty('--value', `${this.mappedValue}`);\n\t}\n\tprotected updateInput(): void {\n\t\tthis.input.value = `${this.value.toFixed(2)}`;\n\t}\n\n\trefreshDom(): void {\n\t\tthis.updateInput();\n\t\tthis.updateRange();\n\t\tsuper.refreshDom();\n\t}\n\n}\n"],
  "mappings": "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",
  "names": []
}
