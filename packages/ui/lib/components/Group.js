import{el as a}from"@fils/utils";import{CSS_UI as i}from"../partials/cssClasses";import{ItemFactory as n}from"../partials/ItemFactory";import{RowTypes as s}from"../utils/dom";import{Button as d}from"./Button";import{Spacer as l}from"./Spacer";import{UIElement as h}from"./UIElement";export class Group extends h{constructor({title:t,folded:e=!1,foldable:r=!0}){super(s.group,t);this.children=[];this.height=0;this.folded=r?e:!1,this.foldable=r}createDom(){super.createDom(),this.content=this.el.querySelector(`.${i.section.content}`)}addEventListeners(){if(!this.foldable)return;this.el.classList.add(i.section.foldable),this.foldWrapper=a("div",i.section.foldableElement),this.el.appendChild(this.foldWrapper),this.foldWrapper.appendChild(this.content),this.el.querySelector("header").addEventListener("click",()=>{this.folded=!this.folded,this.onFold()}),this.onFold()}onFold(){if(!this.foldable)return;const t=this.content.getBoundingClientRect().height;if(this.foldWrapper.style.height=`${t}px`,this.timer&&clearTimeout(this.timer),setTimeout(()=>{this.folded?this.el.classList.add(i.section.folded):this.el.classList.remove(i.section.folded)},5),!this.folded){const e=parseFloat(getComputedStyle(this.foldWrapper).transitionDuration)*1e3;this.timer=setTimeout(()=>{this.foldWrapper.style.height="auto"},e)}this.emit("fold")}addButton(t){const e=new d(t);return e&&(e.init(this.depth+1),this.content.appendChild(e.el)),e}addGroup(t){const e=new Group(t);return e&&(e.on("__childrenChange",r=>{this.change(r)}),e.init(this.depth+1),this.content.appendChild(e.el)),e}addSpacer(t={}){const e=new l(this.depth+1,t);e&&e.el&&this.content.appendChild(e.el)}add(t,e,r){return this.addItem(t,e,r)}addItem(t,e,r){const o=n({object:t,key:e,params:r});return o&&(o.on("__childrenChange",()=>{this.change(o)}),o.init(this.depth+1),this.content.appendChild(o.el)),o}change(t){this.emit("__childrenChange",t),this.emit("change",t)}}
//# sourceMappingURL=Group.js.map
