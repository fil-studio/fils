{
  "version": 3,
  "sources": ["../../src/components/Group.ts"],
  "sourcesContent": ["import { el } from \"@fils/utils\";\nimport { UI } from \"../main\";\nimport { CSS_UI } from \"../partials/cssClasses\";\nimport { EventsManager } from \"../partials/EventsManager\";\nimport { CreateItemParams, ItemFactory } from \"../partials/ItemFactory\";\nimport { RowTypes } from \"../utils/dom\";\nimport { Button } from \"./Button\";\nimport { Item } from \"./items/Item\";\nimport { ItemParameters } from \"./items/ItemParameters\";\nimport { Spacer, SpacerParams } from \"./Spacer\";\nimport { UIElement } from \"./UIElement\";\n\n\nexport interface GroupParams {\n\tparent?: Group | UI;\n\ttitle?: string;\n\n\tfolded?: boolean;\n\tfoldable?: boolean;\n}\nexport class Group extends UIElement {\n\tprotected children: Array<Group | Item | Button | Spacer> = [];\n\n\tfolded: boolean;\n\tfoldable: boolean;\n\tprotected height: number = 0;\n\tprotected timer: any;\n\n\tcontent!: HTMLElement;\n\tfoldWrapper!: HTMLElement;\n\n\n\tconstructor({\n\t\ttitle,\n\t\tfolded = false,\n\t\tfoldable = true,\n\t}: GroupParams) {\n\t\tsuper(RowTypes.group, title);\n\n\t\t// Is it folded or not? If it's not foldable, it's not folded\n\t\tthis.folded = foldable ? folded : false;\n\t\tthis.foldable = foldable;\n\n\t}\n\n\tcreateDom(): void {\n\n\t\tsuper.createDom();\n\n\t\tthis.content = this.el.querySelector(`.${CSS_UI.section.content}`) as HTMLElement;\n\t}\n\n\tprotected addEventListeners(){\n\n\t\tif(!this.foldable) return;\n\n\t\tthis.el.classList.add(CSS_UI.section.foldable);\n\n\t\tthis.foldWrapper = el('div', CSS_UI.section.foldableElement);\n\t\tthis.el.appendChild(this.foldWrapper);\n\t\tthis.foldWrapper.appendChild(this.content);\n\n\t\tconst header = this.el.querySelector('header') as HTMLElement;\n\n\t\theader.addEventListener('click', () => {\n\t\t\tthis.folded = !this.folded;\n\t\t\tthis.onFold();\n\t\t});\n\n\t\tthis.onFold();\n\t}\n\n\tprotected onFold(){\n\n\t\tif(!this.foldable) return;\n\t\tconst h = this.content.getBoundingClientRect().height;\n\n\t\tthis.foldWrapper!.style.height = `${h}px`;\n\n\t\tif(this.timer) clearTimeout(this.timer);\n\n\t\t// Just go with it, without the timeout, it doesn't work\n\t\tsetTimeout(() => {\n\t\t\tif(this.folded) this.el.classList.add(CSS_UI.section.folded);\n\t\t\telse this.el.classList.remove(CSS_UI.section.folded);\n\t\t}, 5);\n\n\t\tif(!this.folded) {\n\t\t\tconst d = parseFloat(getComputedStyle(this.foldWrapper as HTMLElement).transitionDuration) * 1000;\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.foldWrapper.style.height = `auto`;\n\t\t\t}, d);\n\t\t}\n\n\t\tthis.emit('fold');\n\t}\n\n\t/**\n\t * Create a button\n\t */\n\taddButton(params:any): Button{\n\t\tconst button = new Button(params);\n\n\t\tif (button) {\n\t\t\tbutton.init(this.depth + 1);\n\t\t\tthis.content.appendChild(button.el);\n\t\t}\n\n\t\treturn button;\n\t}\n\n\t/**\n\t * Create a group\n\t */\n\taddGroup(params: GroupParams): Group {\n\t\tconst group = new Group(params);\n\n\t\tif (group) {\n\n\t\t\tgroup.on('__childrenChange', (target:any) => {\n\t\t\t\tthis.change(target as EventsManager);\n\t\t\t})\n\n\t\t\tgroup.init(this.depth + 1);\n\t\t\tthis.content.appendChild(group.el);\n\t\t}\n\n\t\treturn group;\n\t}\n\n\t/**\n\t * Create spacer\n\t */\n\taddSpacer(params:SpacerParams = {}) {\n\t\tconst spacer = new Spacer(this.depth + 1, params);\n\t\tif(spacer && spacer.el) this.content.appendChild(spacer.el);\n\t}\n\n\t/**\n\t * Create an item\n\t */\n\tadd(object: Object, key: string, params?: ItemParameters): Item{\n\t\treturn this.addItem(object, key, params);\n\t}\n\taddItem(object:Object, key: string, params?:ItemParameters): Item {\n\n\t\tconst createItemParams: CreateItemParams = { object, key, params };\n\n\t\tconst item = ItemFactory(createItemParams);\n\n\t\tif (item){\n\t\t\titem.on('__childrenChange', () => {\n\t\t\t\tthis.change(item as EventsManager);\n\t\t\t})\n\n\t\t\titem.init(this.depth + 1)\n\t\t\tthis.content.appendChild(item.el);\n\t\t}\n\n\t\treturn item as Item;\n\t}\n\n \tchange(target:EventsManager){\n\t\tthis.emit('__childrenChange', target)\n\t\tthis.emit('change', target);\n\t}\n\n}"],
  "mappings": "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",
  "names": []
}
