{
  "version": 3,
  "sources": ["../../src/components/Group.ts"],
  "sourcesContent": ["import { el } from \"@fils/utils\";\nimport { UI } from \"../main\";\nimport { CSS_UI } from \"../partials/cssClasses\";\nimport { EventsManager } from \"../partials/EventsManager\";\nimport { CreateItemParams, ItemFactory } from \"../partials/ItemFactory\";\nimport { RowTypes } from \"../utils/dom\";\nimport { Button } from \"./Button\";\nimport { Item } from \"./items/Item\";\nimport { ItemParameters } from \"./items/ItemParameters\";\nimport { Spacer, SpacerParams } from \"./Spacer\";\nimport { UIElement } from \"./UIElement\";\n\n\nexport interface GroupParams {\n\tparent?: Group | UI;\n\ttitle?: string;\n\n\tfolded?: boolean;\n\tfoldable?: boolean;\n}\nexport class Group extends UIElement {\n\tprotected children: Array<Group | Item | Button | Spacer> = [];\n\n\tfolded: boolean;\n\tfoldable: boolean;\n\tprotected height: number = 0;\n\tprotected timer: any;\n\n\tcontent!: HTMLElement;\n\tfoldWrapper!: HTMLElement;\n\n\n\tconstructor({\n\t\ttitle,\n\t\tfolded = false,\n\t\tfoldable = true,\n\t}: GroupParams) {\n\t\tsuper(RowTypes.group, title);\n\n\t\t// Is it folded or not? If it's not foldable, it's not folded\n\t\tthis.folded = foldable ? folded : false;\n\t\tthis.foldable = foldable;\n\n\t}\n\n\tcreateDom(): void {\n\n\t\tsuper.createDom();\n\n\t\tthis.content = this.el.querySelector(`.${CSS_UI.section.content}`) as HTMLElement;\n\t}\n\n\tprotected addEventListeners(){\n\n\t\tif(!this.foldable) return;\n\n\t\tthis.el.classList.add(CSS_UI.section.foldable);\n\n\t\tthis.foldWrapper = el('div', CSS_UI.section.foldableElement);\n\t\tthis.el.appendChild(this.foldWrapper);\n\t\tthis.foldWrapper.appendChild(this.content);\n\n\t\tconst header = this.el.querySelector('header') as HTMLElement;\n\n\t\theader.addEventListener('click', () => {\n\t\t\tthis.folded = !this.folded;\n\t\t\tthis.onFold();\n\t\t});\n\n\t\tthis.onFold();\n\t}\n\n\tprotected onFold(){\n\n\t\tif(!this.foldable) return;\n\t\tconst h = this.content.getBoundingClientRect().height;\n\n\t\tthis.foldWrapper!.style.height = `${h}px`;\n\n\t\tif(this.timer) clearTimeout(this.timer);\n\n\t\t// Just go with it, without the timeout, it doesn't work\n\t\tsetTimeout(() => {\n\t\t\tif(this.folded) this.el.classList.add(CSS_UI.section.folded);\n\t\t\telse this.el.classList.remove(CSS_UI.section.folded);\n\t\t}, 5);\n\n\t\tif(!this.folded) {\n\t\t\tconst d = parseFloat(getComputedStyle(this.foldWrapper as HTMLElement).transitionDuration) * 1000;\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.foldWrapper.style.height = `auto`;\n\t\t\t}, d);\n\t\t}\n\n\t\tthis.emit('fold');\n\t}\n\n\t/**\n\t * Create a button\n\t */\n\taddButton(params:any): Button{\n\t\tconst button = new Button(params);\n\n\t\tif (button) {\n\t\t\tbutton.init(this.depth + 1);\n\t\t\tthis.content.appendChild(button.el);\n\t\t}\n\n\t\treturn button;\n\t}\n\n\t/**\n\t * Create a group\n\t */\n\taddGroup(params: GroupParams): Group {\n\t\tconst group = new Group(params);\n\n\t\tif (group) {\n\n\t\t\tgroup.on('__childrenChange', (target:any) => {\n\t\t\t\tthis.change(target as EventsManager);\n\t\t\t})\n\n\t\t\tgroup.init(this.depth + 1);\n\t\t\tthis.content.appendChild(group.el);\n\t\t}\n\n\t\treturn group;\n\t}\n\n\t/**\n\t * Create spacer\n\t */\n\taddSpacer(params:SpacerParams = {}) {\n\t\tconst spacer = new Spacer(this.depth + 1, params);\n\t\tif(spacer && spacer.el) this.content.appendChild(spacer.el);\n\t}\n\n\t/**\n\t * Create an item\n\t */\n\tadd(object: Object, key: string, params?: ItemParameters): Item{\n\t\treturn this.addItem(object, key, params);\n\t}\n\taddItem(object:Object, key: string, params?:ItemParameters): Item {\n\n\t\tconst createItemParams: CreateItemParams = { object, key, params };\n\n\t\tconst item = ItemFactory(createItemParams);\n\n\t\tif (item){\n\t\t\titem.on('__childrenChange', () => {\n\t\t\t\tthis.change(item as EventsManager);\n\t\t\t})\n\n\t\t\titem.init(this.depth + 1)\n\t\t\tthis.content.appendChild(item.el);\n\t\t}\n\n\t\treturn item as Item;\n\t}\n\n \tchange(target:EventsManager){\n\t\tthis.emit('__childrenChange', target)\n\t\tthis.emit('change', target);\n\t}\n\n}"],
  "mappings": "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",
  "names": ["el", "CSS_UI", "ItemFactory", "RowTypes", "Button", "Spacer", "UIElement", "title", "folded", "foldable", "h", "d", "params", "button", "group", "target", "spacer", "object", "key", "item"]
}
